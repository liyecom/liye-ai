# =============================================================================
# Amazon Growth OS - Intent Bucket Lifecycle Configuration v4.2
# =============================================================================
# Core Principle: è¿è¥å¯¹è±¡æ˜¯æ„å›¾æ¡¶ï¼Œä¸æ˜¯å…³é”®è¯
# - æ¯ä¸ªASIN 8-20ä¸ªæ„å›¾æ¡¶
# - å†»ç»“çš„æ˜¯æ„å›¾æ¡¶ï¼Œä¸æ˜¯å…³é”®è¯
# - åŒ—ææ˜Ÿï¼šå†»ç»“ç‡ > 50%ï¼Œå†³ç­–å¯†åº¦ < 10%
# =============================================================================

version: "4.2"
last_updated: "2025-12-30"

# -----------------------------------------------------------------------------
# Intent Bucket Definition
# -----------------------------------------------------------------------------
intent_bucket_schema:
  required_fields:
    intent_id:
      format: "IB-{job_to_be_done_slug}"
      example: "IB-prevent-mud-tracking"
    job_to_be_done:
      type: string
      description: "æ ¸å¿ƒè´­ä¹°ä»»åŠ¡ï¼ˆå®¢æˆ·è¦å®Œæˆçš„å·¥ä½œï¼‰"
      example: "é˜²æ­¢æ³¥åœŸè¢«å¸¦è¿›å®¶é‡Œ"
    scenes:
      type: list
      description: "ä½¿ç”¨åœºæ™¯"
      example: ["ç„å…³å…¥å£", "è½¦åº“é—¨å£", "åé™¢å…¥å£"]
    constraints:
      type: list
      description: "å®¢æˆ·çº¦æŸæ¡ä»¶"
      example: ["å°ºå¯¸20x32", "å¯æœºæ´—", "é˜²æ»‘"]
    fit_type:
      type: enum
      values: ["exact", "substitute", "complement", "irrelevant"]
      description: "äº§å“ä¸æ„å›¾çš„åŒ¹é…ç±»å‹"
    state:
      type: enum
      values: ["TEST", "GROW", "HARVEST", "FROZEN", "KILL"]
      description: "æ„å›¾æ¡¶å½“å‰çŠ¶æ€"

  optional_fields:
    comparisons:
      type: list
      description: "ç«å“å¯¹æ¯”ç‚¹"
      example: ["vs å¡‘æ–™åœ°å«", "vs æ©¡èƒ¶é—¨å«"]
    proofs:
      type: list
      description: "è¯æ®ï¼ˆè¯„è®º/Q&Aå¼•ç”¨ï¼‰"
      example: ["è¯„è®º#123æåˆ°...", "Q&A#45éªŒè¯..."]
    keywords:
      type: list
      description: "å½’å±çš„å…³é”®è¯"
    priority_score:
      type: float
      description: "å‡è®¾æ’åºåˆ†"
    priority_score_components:
      type: map
      fields: ["base_score", "intent_fit", "rufus_factor"]
    confidence:
      type: float
      description: "åˆ†ç±»ç½®ä¿¡åº¦"

# -----------------------------------------------------------------------------
# State Machine Definition
# -----------------------------------------------------------------------------
state_machine:
  states:
    TEST:
      icon: "ğŸ”´"
      description: "æµ‹è¯•æ€ - éªŒè¯æ„å›¾å‡è®¾æ˜¯å¦æˆç«‹"
      entry_condition: "æ–°åˆ›å»ºçš„æ„å›¾æ¡¶é»˜è®¤è¿›å…¥TEST"
      max_duration_days: 14
      actions_allowed:
        - "è°ƒæ•´ç«ä»·ï¼ˆÂ±30%ï¼‰"
        - "æ·»åŠ /åˆ é™¤å…³é”®è¯"
        - "æ›´æ–°æ„å›¾åˆ†ç±»"
      monitoring:
        - metric: "æ›å…‰é‡"
          threshold: "> 1000/å‘¨"
        - metric: "ç‚¹å‡»ç‡"
          threshold: "> 0.5%"
        - metric: "è½¬åŒ–"
          threshold: "> 0"

    GROW:
      icon: "ğŸŸ¡"
      description: "æˆé•¿æ€ - æ‰©å¤§æµé‡å’Œè½¬åŒ–"
      entry_condition: "TESTéªŒè¯é€šè¿‡"
      target_duration_days: 30
      actions_allowed:
        - "è°ƒæ•´ç«ä»·ï¼ˆÂ±30%ï¼‰"
        - "è°ƒæ•´é¢„ç®—ï¼ˆÂ±50%ï¼‰"
        - "ä¼˜åŒ–å†…å®¹"
      monitoring:
        - metric: "è½¬åŒ–ç‡"
          threshold: "> 5%"
        - metric: "ACOS"
          threshold: "< ç›®æ ‡å€¼Ã—1.5"
        - metric: "è‡ªç„¶æ’å"
          threshold: "ç¨³æ­¥æå‡"

    HARVEST:
      icon: "ğŸŸ¢"
      description: "æ”¶å‰²æ€ - ç¨³å®šç›ˆåˆ©"
      entry_condition: "GROWç¨³å®š30å¤©"
      target_duration_days: 60
      actions_allowed:
        - "å¾®è°ƒç«ä»·ï¼ˆÂ±20%ï¼‰"
        - "ç»´æŠ¤æ€§ä¼˜åŒ–"
      monitoring:
        - metric: "ACOS"
          threshold: "< ç›®æ ‡å€¼"
        - metric: "è½¬åŒ–ç‡æ³¢åŠ¨"
          threshold: "< 15%"

    FROZEN:
      icon: "âšª"
      description: "å†»ç»“æ€ - ç¨³å®šè¿è¡Œï¼Œæ— éœ€å¹²é¢„"
      entry_condition: "HARVESTæŒç»­ç¨³å®š60å¤©"
      target: "åŒ—ææ˜Ÿç›®æ ‡ï¼š50%+ æ„å›¾æ¡¶è¿›å…¥æ­¤çŠ¶æ€"
      actions_allowed: []       # é»˜è®¤ä¸å…è®¸ä»»ä½•æ“ä½œ
      unfreeze_required: true
      monitoring:
        - metric: "å‘¨è½¬åŒ–ä¸‹é™"
          threshold: "< 30%"
        - metric: "ACOS"
          threshold: "< ç›®æ ‡å€¼Ã—2"

    KILL:
      icon: "â¬›"
      description: "æ·˜æ±°æ€ - åœæ­¢æŠ•æ”¾"
      entry_condition: "TESTå¤±è´¥ OR GROWæ— æ³•æˆé•¿"
      actions_allowed:
        - "å½’æ¡£è®°å½•"
        - "æå–å¤±è´¥æ•™è®­"
      final_state: true

# -----------------------------------------------------------------------------
# State Transitions
# -----------------------------------------------------------------------------
transitions:
  TEST_to_GROW:
    trigger: "éªŒè¯é€šè¿‡"
    conditions:
      - "7-14å¤©å†…æœ‰è½¬åŒ–"
      - "ç‚¹å‡»ç‡ > 0.5%"
      - "æ— æ˜æ˜¾æµé‡è´¨é‡é—®é¢˜"
    requires_trace: true

  TEST_to_KILL:
    trigger: "éªŒè¯å¤±è´¥"
    conditions:
      - "14å¤©æ— è½¬åŒ–"
      - "æˆ– 100æ¬¡ç‚¹å‡»æ— è½¬åŒ–"
      - "æˆ– æµé‡è´¨é‡æå·®"
    requires_trace: true

  GROW_to_HARVEST:
    trigger: "ç¨³å®šè¾¾æ ‡"
    conditions:
      - "è¿ç»­30å¤©è½¬åŒ–ç‡æ³¢åŠ¨ < 20%"
      - "ACOSåœ¨ç›®æ ‡å€¼èŒƒå›´å†…"
      - "è‡ªç„¶æ’åç¨³å®š"
    requires_trace: true

  GROW_to_KILL:
    trigger: "æ— æ³•æˆé•¿"
    conditions:
      - "30å¤©åä»æ— æ³•è¾¾åˆ°HARVESTæ ‡å‡†"
      - "æˆ– ACOSæŒç»­è¶…æ ‡"
      - "æˆ– æŠ•å…¥äº§å‡ºæ¯”æ¶åŒ–"
    requires_trace: true

  HARVEST_to_FROZEN:
    trigger: "æŒç»­ç¨³å®š"
    conditions:
      all_of:
        - "è¿ç»­60å¤©è½¬åŒ–ç‡æ³¢åŠ¨ < 15%"
        - "ACOSåœ¨ç›®æ ‡å€¼Â±20%èŒƒå›´å†…"
        - "æ— ç«å“é‡å¤§å˜åŒ–"
        - "æ— å­£èŠ‚æ€§å› ç´ "
    requires_trace: true

  FROZEN_to_GROW:
    trigger: "å¼‚å¸¸è§£å†»"
    conditions:
      any_of:
        - "å‘¨è½¬åŒ–ä¸‹é™ > 30%"
        - "ACOS > ç›®æ ‡å€¼Ã—2"
        - "æ–°ç«å“è¿›å…¥å‰5"
        - "ç«å“ä»·æ ¼ä¸‹é™ > 20%"
        - "å·®è¯„çªå¢ï¼ˆ24å°æ—¶å†…3+æ¡ï¼‰"
    requires: "äººå·¥ç¡®è®¤"
    requires_trace: true

# -----------------------------------------------------------------------------
# Target Distribution (åŒ—ææ˜Ÿç›®æ ‡)
# -----------------------------------------------------------------------------
target_distribution:
  TEST:
    min: 0.05                   # 5%
    max: 0.10                   # 10%
    purpose: "æ–°æ„å›¾æ¢ç´¢"
  GROW:
    min: 0.10                   # 10%
    max: 0.15                   # 15%
    purpose: "é‡ç‚¹åŸ¹å…»"
  HARVEST:
    min: 0.15                   # 15%
    max: 0.20                   # 20%
    purpose: "ç¨³å®šæ”¶å‰²"
  FROZEN:
    min: 0.50                   # 50%
    max: 0.70                   # 70%
    purpose: "æ ¸å¿ƒç›®æ ‡ï¼šä¸éœ€è¦äººç®¡"
    north_star: true
  KILL:
    max: 0.05                   # < 5%
    purpose: "å·²æ·˜æ±°"

# -----------------------------------------------------------------------------
# North Star KPIs
# -----------------------------------------------------------------------------
north_star_kpis:
  freeze_rate:
    target: "> 50%"
    description: "å†»ç»“æ€æ„å›¾æ¡¶å æ¯”"
    calculation: "FROZEN_buckets / total_buckets"
    good: "> 60%"
    warning: "40-50%"
    critical: "< 40%"

  decision_density:
    target: "< 10%"
    description: "æœ¬å‘¨å†³ç­–æ•° / æ€»æ„å›¾æ¡¶æ•°"
    calculation: "weekly_decisions / total_buckets"
    good: "< 8%"
    warning: "10-15%"
    critical: "> 15%"

# -----------------------------------------------------------------------------
# ASIN Bucket Limits
# -----------------------------------------------------------------------------
bucket_limits:
  per_asin:
    min: 8
    max: 20
    recommended: 12
  rationale: |
    å¤ªå°‘ï¼šæ— æ³•è¦†ç›–å¤šå…ƒåŒ–æ„å›¾ï¼Œé”™å¤±æµé‡
    å¤ªå¤šï¼šå†³ç­–å¯†åº¦è¿‡é«˜ï¼Œç®¡ç†æˆæœ¬å¤±æ§
    8-20æ˜¯ç»éªŒå€¼ï¼Œéœ€æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´

# -----------------------------------------------------------------------------
# Metadata
# -----------------------------------------------------------------------------
metadata:
  owner: "intent-analyst"
  state_owner: "guardrail-governor"
  transition_tracker: "trace-scribe"
  requires_trace: true
