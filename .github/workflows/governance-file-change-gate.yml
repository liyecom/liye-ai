name: Governance File Change Gate

on:
  pull_request:
    branches: [main]
    paths:
      - '.github/workflows/**'
      - '.github/CODEOWNERS'
      - 'docs/governance/**'
      - 'docs/architecture/**'
      - 'CLAUDE.md'

jobs:
  governance-review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Check governance file changes
        run: |
          echo "=== Governance File Change Gate ==="
          echo "This PR modifies protected governance files."
          echo "Requires approval from @liyecom/governance-team per CODEOWNERS."
          echo ""
          echo "Changed governance files:"
          git diff --name-only origin/${{ github.base_ref }}...HEAD | grep -E '^\.github/|^docs/governance/|^docs/architecture/|^CLAUDE\.md' || echo "No governance files changed"
          echo ""
          echo "Gate passed - CODEOWNERS will enforce review requirement."
