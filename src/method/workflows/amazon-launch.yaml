# LiYe AI Workflow DSL - Amazon Product Launch
# Location: src/method/workflows/amazon-launch.yaml

workflow:
  id: amazon-launch
  name: Amazon Product Launch Workflow
  version: 1.0.0
  track: standard
  domain: amazon-growth
  description: Complete Amazon product launch workflow

phases:
  - id: analyze
    name: Market Analysis
    description: Market and competitive analysis
    agents:
      - market-analyst
      - keyword-architect
    tasks:
      - id: market-research
        agent: market-analyst
        skill: market_research
        inputs:
          - product_category
          - target_market
        outputs:
          - market_report

      - id: competitor-analysis
        agent: market-analyst
        skill: competitor_analysis
        depends_on: [market-research]
        inputs:
          - market_report
        outputs:
          - competitor_report

      - id: keyword-research
        agent: keyword-architect
        skill: keyword_research
        depends_on: [market-research]
        inputs:
          - market_report
        outputs:
          - keyword_report

  - id: plan
    name: Strategy Planning
    description: Keyword and PPC strategy
    depends_on: [analyze]
    agents:
      - keyword-architect
      - ppc-strategist
    tasks:
      - id: keyword-strategy
        agent: keyword-architect
        skill: tes_calculation
        inputs:
          - keyword_report
        outputs:
          - keyword_strategy

      - id: ppc-strategy
        agent: ppc-strategist
        skill: campaign_analysis
        depends_on: [keyword-strategy]
        inputs:
          - keyword_strategy
        outputs:
          - ppc_plan

  - id: design
    name: Listing Design
    description: Listing and content creation
    depends_on: [plan]
    agents:
      - listing-optimizer
    tasks:
      - id: listing-creation
        agent: listing-optimizer
        skill: content_optimization
        inputs:
          - keyword_strategy
          - competitor_report
        outputs:
          - listing_draft

      - id: a-plus-content
        agent: listing-optimizer
        skill: a_plus_content
        depends_on: [listing-creation]
        inputs:
          - listing_draft
        outputs:
          - a_plus_draft

  - id: execute
    name: Launch Execution
    description: Implementation and launch
    depends_on: [design]
    agents:
      - execution-agent
      - quality-gate
    tasks:
      - id: listing-publish
        agent: execution-agent
        skill: task_execution
        inputs:
          - listing_draft
          - a_plus_draft
        outputs:
          - published_listing

      - id: ppc-launch
        agent: execution-agent
        skill: task_execution
        depends_on: [listing-publish]
        inputs:
          - ppc_plan
        outputs:
          - active_campaigns

      - id: quality-check
        agent: quality-gate
        skill: quality_check
        depends_on: [listing-publish, ppc-launch]
        inputs:
          - published_listing
          - active_campaigns
        outputs:
          - quality_report

transitions:
  - from: analyze
    to: plan
    condition: "analyze.complete && analyze.quality_score >= 0.8"

  - from: plan
    to: design
    condition: "plan.approved"

  - from: design
    to: execute
    condition: "design.reviewed"

  - from: execute
    to: complete
    condition: "quality_check.passed"

guards:
  - phase: execute
    condition: "all_previous_phases.complete"
    action: block
    message: "All analysis and planning must be complete before launch"
