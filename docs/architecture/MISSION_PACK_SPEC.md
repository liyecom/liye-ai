# Mission Pack Specification

> Standard protocol for task execution across all brokers

## Overview

A Mission Pack is a standardized directory structure that encapsulates:
- Task objective and constraints
- Required context
- Deliverables
- Evidence chain

## Directory Structure

```
missions/<YYYYMMDD-HHMM>__<project>__<slug>/
├── mission.yaml      # Mission configuration (required)
├── context.md        # Task context (required)
├── constraints.md    # Boundaries and rules (required)
├── outputs/          # Deliverables directory (required)
│   ├── answer.md     # Main response
│   └── ...           # Additional outputs
├── evidence/         # Evidence directory (recommended)
│   ├── screenshots/  # Visual proof
│   ├── links.txt     # Referenced URLs
│   └── steps.md      # Action log
└── meta.json         # Runtime metadata (system-generated)
```

## Mission ID Format

```
<YYYYMMDD-HHMM>__<project>__<slug>
```

Examples:
- `20251231-1200__amazon__keyword-analysis`
- `20251231-1430__medical__drug-research`
- `20251231-0900__default__quick-question`

## mission.yaml Schema

```yaml
# Required fields
id: string              # Mission ID (auto-generated)
objective: string       # What needs to be done
done_definition: string # How to know it's complete

# Broker configuration
broker: enum            # codex | gemini | antigravity | claude
model: string           # Model identifier

# Budget constraints
budget:
  maxSteps: number      # Maximum execution steps
  maxTokens: number     # Maximum token usage
  maxTimeMinutes: number # Maximum time in minutes

# Governance
approval: enum          # none | on-request | always
sandbox: enum           # read-only | full-access

# Metadata
tags: string[]          # Project tags
created_at: string      # ISO timestamp
```

### Example

```yaml
id: "20251231-1200__amazon__keyword-analysis"
objective: "Analyze top 50 keywords for ASIN B08XXX"
done_definition: "CSV file with keyword rankings and search volume"

broker: codex
model: gpt-4.1

budget:
  maxSteps: 50
  maxTokens: 100000
  maxTimeMinutes: 30

approval: on-request
sandbox: read-only

tags:
  - amazon
  - keywords
  - research
created_at: "2025-12-31T12:00:00.000Z"
```

## context.md Template

```markdown
# Mission Context

## Objective
[Clear statement of what needs to be done]

## Project
[Project name and scope]

## Required Reading
- [File or document 1]
- [File or document 2]

## Background
[Relevant background information]

## References
- [Link 1]
- [Link 2]
```

## constraints.md Template

```markdown
# Mission Constraints

## Boundaries
- [What is in scope]
- [What is out of scope]

## Forbidden Actions
- [Action 1 that must not be taken]
- [Action 2 that must not be taken]

## Approval Rules
- [When to ask for approval]
- [What requires explicit consent]

## Security
- [Data handling requirements]
- [Access restrictions]
```

## meta.json Schema

Generated by the system after mission execution:

```json
{
  "run_id": "a1b2c3d4e5f6",
  "started_at": "2025-12-31T12:00:00.000Z",
  "finished_at": "2025-12-31T12:15:00.000Z",
  "status": "completed",
  "broker": "codex",
  "model": "gpt-4.1",
  "outputs": ["answer.md", "keywords.csv"],
  "evidence": ["links.txt"],
  "environment": {
    "node_version": "v20.10.0",
    "platform": "darwin"
  }
}
```

### Status Values

| Status | Description |
|--------|-------------|
| `pending` | Mission created but not run |
| `running` | Mission currently executing |
| `completed` | Mission finished successfully |
| `failed` | Mission encountered an error |
| `cancelled` | Mission was cancelled |

## Outputs Directory

### Required Files

- `answer.md` - Main response or deliverable

### Common Output Types

| File | Description |
|------|-------------|
| `answer.md` | Primary text response |
| `data.csv` | Structured data output |
| `report.pdf` | Generated report |
| `code.js` | Generated code |
| `BROKER_PROMPT.md` | Prompt for manual execution |

## Evidence Directory

### Recommended Structure

```
evidence/
├── screenshots/        # Visual proof of actions
│   ├── step1.png
│   └── step2.png
├── links.txt           # All URLs referenced
├── steps.md            # Step-by-step action log
├── recordings/         # Screen recordings
│   └── session.mp4
└── raw/                # Raw data before processing
    └── api-response.json
```

### links.txt Format

```
# Referenced URLs
https://www.example.com/page1
https://www.example.com/page2

# API Endpoints
https://api.example.com/v1/data
```

### steps.md Format

```markdown
# Execution Steps

## Step 1: Initial Research
- Action: Searched for keywords
- Result: Found 50 candidates
- Time: 2 minutes

## Step 2: Data Analysis
- Action: Analyzed search volume
- Result: Ranked keywords
- Time: 5 minutes

## Summary
- Total steps: 5
- Total time: 15 minutes
- Outcome: Success
```

## Lifecycle

```
┌─────────┐     ┌─────────┐     ┌─────────┐     ┌─────────┐
│ CREATE  │ ──> │   RUN   │ ──> │ INGEST  │ ──> │  INDEX  │
│ mission │     │ broker  │     │ outputs │     │ search  │
│   new   │     │   run   │     │ ingest  │     │  ready  │
└─────────┘     └─────────┘     └─────────┘     └─────────┘
```

1. **CREATE**: `liye mission new --slug <s>`
2. **RUN**: `liye mission run <dir>`
3. **INGEST**: `liye mission ingest <dir>`
4. **INDEX**: Automatically updated for search

## Best Practices

1. **Clear Objectives**: Write specific, measurable objectives
2. **Defined Done**: Specify exactly what "done" looks like
3. **Budget Limits**: Always set reasonable budget constraints
4. **Evidence Trail**: Save evidence for reproducibility
5. **Tag Consistently**: Use consistent tags for organization

---

**Version**: 1.0
**Last Updated**: 2025-12-31
