# P4 Auto-Eligibility Calibration Report

**Generated**: 2026-01-29T14:57:52.317Z
**Samples**: 12
**Profiles Tested**: conservative, balanced, aggressive

## Executive Summary

This report evaluates threshold profiles for ADD_NEGATIVE_KEYWORDS auto-execution eligibility.

## Profile Comparison

| Profile | Eligible | Auto/DryRun | Suggest | Blocked | Deny |
|---------|----------|-------------|---------|---------|------|
| conservative | 6/12 (50%) | 0 | 11 | 0 | 1 |
| balanced | 7/12 (58%) | 0 | 11 | 0 | 1 |
| aggressive | 8/12 (67%) | 0 | 11 | 0 | 1 |

## Blocked Reasons Distribution

### Conservative

| Reason | Count |
|--------|-------|
| eligibility_failed | 5 |
| Exceeds max_negatives_per_run: 15 > 10 | 1 |
| Term too short: "ab" (min: 3) | 1 |
| not_in_whitelist | 1 |

### Balanced

| Reason | Count |
|--------|-------|
| eligibility_failed | 4 |
| Exceeds max_negatives_per_run: 15 > 10 | 1 |
| Term too short: "ab" (min: 3) | 1 |
| not_in_whitelist | 1 |

### Aggressive

| Reason | Count |
|--------|-------|
| eligibility_failed | 3 |
| Exceeds max_negatives_per_run: 15 > 10 | 1 |
| Term too short: "ab" (min: 3) | 1 |
| not_in_whitelist | 1 |

## Sample-by-Sample Results

### Group A: Should Auto-Execute

| Sample | Scenario | Conservative | Balanced | Aggressive |
|--------|----------|--------------|----------|------------|
| A1_boundary_eligible | Boundary values - just meets thresholds | ❌ | ✅ | ✅ |
| A2_high_waste | High waste - clearly eligible | ✅ | ✅ | ✅ |
| A3_max_keywords | Exactly max_negatives_per_run keywords | ✅ | ✅ | ✅ |
| A4_cooldown_not_triggered | Cooldown elapsed - can execute | ✅ | ✅ | ✅ |

### Group B: Should Degrade (SUGGEST_ONLY)

| Sample | Scenario | Conservative | Balanced | Aggressive |
|--------|----------|--------------|----------|------------|
| B1_spend_below | Spend below threshold | ✅ | ✅ | ⚠️ |
| B2_clicks_below | Clicks below threshold | ✅ | ✅ | ✅ |
| B3_has_orders | Has orders - not pure waste | ✅ | ✅ | ✅ |
| B4_waste_ratio_below | Waste ratio below threshold | ✅ | ✅ | ✅ |

### Group C: Should Block/Deny

| Sample | Scenario | Status | Reason |
|--------|----------|--------|--------|
| C1_exceeds_max_keywords | Exceeds max_negatives_per_run | SUGGEST_ONLY | Exceeds max_negatives_per_run: 15 > 10 |
| C2_cooldown_active | Cooldown still active | SUGGEST_ONLY | - |
| C3_all_filtered | All candidates filtered by brand/asin/too_short | SUGGEST_ONLY | Term too short: "ab" (min: 3) |
| C4_non_whitelisted | Non-whitelisted action_id | DENY_UNSUPPORTED_ACTION | not_in_whitelist |

## Threshold Values by Profile

| Threshold | Conservative | Balanced | Aggressive |
|-----------|--------------|----------|------------|
| wasted_spend_ratio_gte | 0.35 | 0.30 | 0.25 |
| clicks_gte | 25 | 20 | 15 |
| orders_eq | 0 | 0 | 0 |
| spend_gte | $20 | $15 | $10 |

## Calibration Recommendation

Based on the evaluation results:

### Recommended Profile: **balanced**

**Rationale:**
1. **Coverage**: Balanced achieves 7/12 (58%) eligibility on valid samples
2. **Safety**: All B-group samples correctly degraded to SUGGEST_ONLY
3. **False Positive Risk**: Conservative is too restrictive (may miss A1 boundary case), Aggressive would pass 8/12 samples including potential false positives

### v0.2 Recommended Thresholds

```yaml
eligibility:
  active_profile: balanced
  profiles:
    balanced:
      wasted_spend_ratio_gte: 0.30
      clicks_gte: 20
      orders_eq: 0
      spend_gte: 15
```

## Reproducibility

**Run Command:**
```bash
node src/reasoning/auto_eligibility_evaluator.mjs
```

**Input Files:**
- Samples: `tests/fixtures/reasoning/p4/calibration_samples.json`
- Playbook: `docs/contracts/reasoning/amazon-growth/actions/ADD_NEGATIVE_KEYWORDS.yaml`

**Output:**
- This report: `docs/reasoning/reports/P4_AUTO_ELIGIBILITY_CALIBRATION_YYYY-MM-DD.md`

**Statistics Definition:**
| Metric | Definition |
|--------|------------|
| Eligible | checkEligibility() returns eligible=true |
| Auto/DryRun | executeAction() returns AUTO_EXECUTED or DRY_RUN |
| Suggest | executeAction() returns SUGGEST_ONLY |
| Blocked | executeAction() returns BLOCKED |
| Deny | executeAction() returns DENY_UNSUPPORTED_ACTION |

## Next Steps

1. Monitor auto-execution rates with balanced profile
2. Collect outcome data for 4 A-group scenarios
3. Re-calibrate after 14 days of production data

---
*Report generated by P4 Auto-Eligibility Evaluator*
