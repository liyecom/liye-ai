# ==============================================
# Competitor Price Monitoring Configuration
# Amazon Growth OS
# ==============================================

# Monitoring Settings
monitoring:
  # Frequency of price checks
  check_frequency: "daily"  # hourly, daily, weekly

  # Data retention
  history_retention_days: 365

  # Maximum competitors to track per ASIN
  max_competitors_per_asin: 10

  # Minimum data points for trend analysis
  min_data_points_for_trend: 7

# Competitor Identification
competitor_detection:
  # How to find competitors
  methods:
    - search_results  # Products appearing in same search results
    - frequently_bought_together  # FBT suggestions
    - similar_items  # Similar items section
    - category_bestsellers  # Top BSR in category

  # Filters for competitor selection
  filters:
    min_rating: 3.5
    min_reviews: 50
    max_price_difference_percent: 50  # Only track within 50% of our price
    exclude_own_brand: true

  # Priority scoring weights
  priority_weights:
    bsr_proximity: 0.30  # How close their BSR is to ours
    price_proximity: 0.25  # How close their price is
    review_count: 0.20  # More reviews = more important
    rating: 0.15  # Higher rating = more threatening
    search_overlap: 0.10  # Keyword overlap

# Price Tracking
price_tracking:
  # What to track
  track_fields:
    - current_price
    - list_price
    - sale_price
    - deal_price
    - coupon_discount
    - subscribe_save_discount

  # Price calculation
  effective_price_includes:
    - sale_price
    - coupon_discount
    # subscribe_save_discount excluded (different customer segment)

  # Price normalization
  normalize_by_unit: true  # e.g., price per count for multi-packs

# Alert Configuration
alerts:
  # Price drop alerts
  price_drop:
    enabled: true
    thresholds:
      - name: "significant_drop"
        percent: 10
        severity: "warning"
        description: "Competitor dropped price by 10%+"
      - name: "major_drop"
        percent: 20
        severity: "critical"
        description: "Competitor dropped price by 20%+"
      - name: "flash_sale"
        percent: 30
        severity: "urgent"
        description: "Competitor running flash sale (30%+ off)"

  # Price increase alerts
  price_increase:
    enabled: true
    thresholds:
      - name: "minor_increase"
        percent: 10
        severity: "info"
        description: "Opportunity: competitor raised price"
      - name: "major_increase"
        percent: 20
        severity: "opportunity"
        description: "Major opportunity: competitor significantly raised price"

  # Competitive position alerts
  position:
    enabled: true
    scenarios:
      - name: "undercut"
        condition: "competitor_price < our_price * 0.95"
        severity: "warning"
        description: "Competitor now priced below us"
      - name: "price_war"
        condition: "3+ competitors dropped prices in 7 days"
        severity: "critical"
        description: "Potential price war detected"
      - name: "market_leader_move"
        condition: "top_bsr_competitor changed price"
        severity: "info"
        description: "Category leader adjusted pricing"

  # Stock alerts
  stock:
    enabled: true
    scenarios:
      - name: "competitor_oos"
        condition: "competitor out of stock"
        severity: "opportunity"
        description: "Competitor out of stock - opportunity to capture sales"
      - name: "competitor_low_stock"
        condition: "competitor stock < 10 units"
        severity: "info"
        description: "Competitor running low on inventory"

# Competitive Response Strategies
response_strategies:
  # When competitor drops price
  price_drop_response:
    - name: "match"
      description: "Match competitor price"
      applicable_when: "margin_after_match >= 15%"
      priority: 1
    - name: "partial_match"
      description: "Reduce price partially to stay competitive"
      applicable_when: "margin_after_match >= 10%"
      priority: 2
    - name: "hold_and_differentiate"
      description: "Maintain price, emphasize value/quality"
      applicable_when: "our_rating > competitor_rating + 0.3"
      priority: 3
    - name: "coupon_response"
      description: "Add coupon instead of permanent price cut"
      applicable_when: "temporary_promotion_likely"
      priority: 4
    - name: "bundle_strategy"
      description: "Create bundle to offer better value"
      applicable_when: "complementary_products_available"
      priority: 5

  # When competitor raises price
  price_increase_response:
    - name: "hold_price"
      description: "Maintain current price, enjoy margin improvement relative to competition"
      priority: 1
    - name: "slight_increase"
      description: "Test small price increase if market supports"
      applicable_when: "demand_stable AND margin < 25%"
      priority: 2

  # When competitor goes OOS
  oos_response:
    - name: "increase_ads"
      description: "Increase PPC spend to capture displaced demand"
      priority: 1
    - name: "premium_positioning"
      description: "Consider slight price increase while competitor unavailable"
      applicable_when: "our_stock > 30_days"
      priority: 2

# Pricing Intelligence
pricing_intelligence:
  # Price elasticity estimation
  elasticity:
    enabled: true
    lookback_days: 90
    min_price_changes: 3

  # Optimal price suggestion
  price_optimization:
    enabled: true
    target_metric: "profit"  # profit, revenue, units
    constraints:
      min_margin: 0.15  # 15% minimum margin
      max_price_gap_vs_leader: 0.20  # Max 20% above category leader

  # Seasonality detection
  seasonality:
    enabled: true
    detect_patterns:
      - weekly  # Day of week patterns
      - monthly  # Monthly patterns
      - yearly   # Holiday/seasonal patterns

# Data Sources Integration
data_sources:
  # Keepa API (primary)
  keepa:
    enabled: true
    api_endpoint: "https://api.keepa.com"
    rate_limit: 100  # requests per minute
    data_types:
      - price_history
      - sales_rank_history
      - buy_box_history
      - stock_status

  # Helium10 (alternative)
  helium10:
    enabled: false
    api_endpoint: "https://api.helium10.com"

  # Manual entry fallback
  manual:
    enabled: true
    template_path: "data/inputs/competitor_prices.xlsx"

# Reporting
reporting:
  # Report types
  reports:
    daily_snapshot:
      enabled: true
      time: "09:00"
      contents:
        - price_changes_24h
        - alerts_summary
        - competitive_position

    weekly_analysis:
      enabled: true
      day: "monday"
      contents:
        - price_trends
        - market_dynamics
        - recommendations

    monthly_strategic:
      enabled: true
      day: 1
      contents:
        - market_share_estimate
        - pricing_strategy_review
        - competitor_landscape

  # Export settings
  export:
    formats: ["markdown", "csv", "json"]
    path: "reports/competitor/"

# Database Schema
database:
  tables:
    competitors: "dim_competitors"
    price_history: "fact_competitor_prices"
    alerts: "fact_price_alerts"
    responses: "fact_competitive_responses"

# Notification Settings
notifications:
  channels:
    - email
    - slack
    - dashboard

  severity_routing:
    urgent: ["email", "slack"]
    critical: ["email", "slack"]
    warning: ["dashboard", "email"]
    info: ["dashboard"]
    opportunity: ["email", "dashboard"]
